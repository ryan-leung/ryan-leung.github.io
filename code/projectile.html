<!DOCTYPE html>
<html>

<head>
  <title>Projectile Motion Calculator</title>
  <link href="https://unpkg.com/onsenui/css/onsenui.css" rel="stylesheet"></link>
  <link href="https://unpkg.com/onsenui/css/onsen-css-components.min.css" rel="stylesheet"></link>
  <script src="https://unpkg.com/onsenui/js/onsenui.min.js"></script>
</head>

<body>
  <!-- Start your code here -->
  <ons-page>

    <ons-toolbar>
      <div class="center">Projectile Motion Calculator</div>
    </ons-toolbar>

    <div style="text-align: center; margin-top: 30px;">
      <p>Initial Velocity (m/s)</p>
      <p>
        <ons-input id="initial-velocity" modifier="underbar" value="10" float></ons-input>
      </p>

      <p>Meter (cm) : </p>
      <p>
          <ons-input id="display-meter" modifier="underbar" value="100" float></ons-input>
      </p>
      <ons-row>
        <ons-col width="40px" style="text-align: center; line-height: 31px;">
          10
        </ons-col>
        <ons-col>
          <ons-range style="width: 100%;" min="10" max="1000" step="10" onChange="calc()" id="range-meter" value="100"></ons-range>
        </ons-col>
        <ons-col width="40px" style="text-align: center; line-height: 31px;">
          1000
        </ons-col>
      </ons-row>

      <p>Angle:</p>
      <div class="ui inverted segment massive">
        <span id="result">85.49</span>Â°
      </div>

      <p style="margin-top: 30px;">
        <ons-button onclick="calc1()">Calc</ons-button>
      </p>

    </div>
  </ons-page>

  <!-- End your code here -->
  <script>

    function squ(num) {
      return num * num;
    }

    function calc() {
      var initial_velocity = parseFloat(document.getElementById('initial-velocity').value);
      var target_meter = parseFloat(document.getElementById('range-meter').value);
      document.getElementById('display-meter').value = target_meter;
      var theta = calcTheta(initial_velocity, target_meter);
      document.getElementById('result').innerHTML = theta.toFixed(2);
      console.log(initial_velocity);
      console.log(target_meter);
      console.log(theta);
    };

    function calc1() {
      var initial_velocity = parseFloat(document.getElementById('initial-velocity').value);
      var target_meter = parseFloat(document.getElementById('display-meter').value);
      document.getElementById('range-meter').value = target_meter;
      var theta = calcTheta(initial_velocity, target_meter);
      document.getElementById('result').innerHTML = theta.toFixed(2);
      console.log(initial_velocity);
      console.log(target_meter);
      console.log(theta);
    };

    function calcTheta(initial_velocity, x_input) {
      //var v_o = 10;
      var v_o = initial_velocity;
      var g = 9.8;
      var y_o = 20;
      var x_input = x_input/100.0;
      var tantheta = (x_input - Math.sqrt(squ(x_input) + 2*g*squ(x_input/v_o)*(y_o - 0.5*g*squ(x_input/v_o))))*(-1.0/(g*squ(x_input/v_o)));
      var theta = Math.atan(tantheta)/Math.PI*180.0;
      return theta;
    }
  </script>
</body>

</html>
